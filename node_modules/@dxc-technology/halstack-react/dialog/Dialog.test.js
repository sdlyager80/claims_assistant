"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _Dialog = _interopRequireDefault(require("./Dialog"));

describe("Dialog component tests", function () {
  test("Dialog renders with correct text and accesibility attributes", function () {
    var _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Dialog["default"], null, "dialog-text")),
        getByText = _render.getByText,
        getByRole = _render.getByRole;

    expect(getByRole("dialog")).toBeTruthy();
    expect(getByRole("dialog").getAttribute("aria-modal")).toBe("true");
    expect(getByText("dialog-text")).toBeTruthy();
  });
  test("Dialog renders without close button", function () {
    var _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Dialog["default"], {
      isCloseVisible: false
    }, "dialog-text")),
        queryByRole = _render2.queryByRole;

    expect(queryByRole("button")).toBeFalsy();
  });
  test("Dialog renders with aria-modal false when overlay is not used", function () {
    var _render3 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Dialog["default"], {
      isCloseVisible: false,
      overlay: false
    }, "dialog-text")),
        getByRole = _render3.getByRole;

    expect(getByRole("dialog")).toBeTruthy();
    expect(getByRole("dialog").getAttribute("aria-modal")).toBe("false");
  });
  test("Calls correct function onCloseClick", function () {
    var onCloseClick = jest.fn();

    var _render4 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Dialog["default"], {
      onCloseClick: onCloseClick
    }, "dialog-text")),
        getByRole = _render4.getByRole;

    var closeButton = getByRole("button");

    _react2.fireEvent.click(closeButton);

    expect(onCloseClick).toHaveBeenCalled();
  });
  test("Calls correct function onCloseClick when 'escape' key is pressed", function () {
    var onCloseClick = jest.fn();

    var _render5 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Dialog["default"], {
      onCloseClick: onCloseClick
    }, "dialog-text")),
        getByRole = _render5.getByRole;

    _react2.fireEvent.keyDown(getByRole("button"), {
      key: "Escape",
      code: "Escape",
      keyCode: 27,
      charCode: 27
    });

    expect(onCloseClick).toHaveBeenCalled();
  });
});